<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Fullscreen Backwards PDF Animation</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
    }
    canvas {
      display: block;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <canvas id="pdf-canvas"></canvas>

  <script>
    const url = 'https://raw.githubusercontent.com/boobalootoo/aandd/main/map.pdf';
    const canvas = document.getElementById('pdf-canvas');
    const ctx = canvas.getContext('2d');

    let pdfDoc = null;
    let currentPage = 0;
    const delay = 2000; // Time between pages in ms

    // Resize canvas to match screen
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // Load PDF
    pdfjsLib.getDocument(url).promise.then(pdf => {
      pdfDoc = pdf;
      currentPage = pdf.numPages + 1; // Start just after the last page
      animateBackwards();
    });

    function animateBackwards() {
      if (!pdfDoc || currentPage <= 1) return;
      currentPage--;
      pdfDoc.getPage(currentPage).then(page => {
        const scale = Math.min(
          canvas.width / page.getViewport({ scale: 1 }).width,
          canvas.height / page.getViewport({ scale: 1 }).height
        );
        const viewport = page.getViewport({ scale });

        const renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };

        canvas.width = viewport.width;
        canvas.height = viewport.height;

        page.render(renderContext).promise.then(() => {
          setTimeout(animateBackwards, delay);
        });
      });
    }
  </script>
</body>
</html>
